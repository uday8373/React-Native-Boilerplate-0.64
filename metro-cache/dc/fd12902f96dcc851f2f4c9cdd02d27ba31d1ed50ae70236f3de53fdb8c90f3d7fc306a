{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"../NativeAnimatedHelper","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var NativeAnimatedHelper = _$$_REQUIRE(_dependencyMap[2], \"../NativeAnimatedHelper\");\n\n  var NativeAnimatedAPI = NativeAnimatedHelper.API;\n\n  var invariant = _$$_REQUIRE(_dependencyMap[3], \"invariant\");\n\n  var _uniqueId = 1;\n\n  var AnimatedNode = function () {\n    _createClass(AnimatedNode, [{\n      key: \"__attach\",\n      value: function __attach() {}\n    }, {\n      key: \"__detach\",\n      value: function __detach() {\n        if (this.__isNative && this.__nativeTag != null) {\n          NativeAnimatedHelper.API.dropAnimatedNode(this.__nativeTag);\n          this.__nativeTag = undefined;\n        }\n      }\n    }, {\n      key: \"__getValue\",\n      value: function __getValue() {}\n    }, {\n      key: \"__getAnimatedValue\",\n      value: function __getAnimatedValue() {\n        return this.__getValue();\n      }\n    }, {\n      key: \"__addChild\",\n      value: function __addChild(child) {}\n    }, {\n      key: \"__removeChild\",\n      value: function __removeChild(child) {}\n    }, {\n      key: \"__getChildren\",\n      value: function __getChildren() {\n        return [];\n      }\n    }]);\n\n    function AnimatedNode() {\n      _classCallCheck(this, AnimatedNode);\n\n      this._listeners = {};\n    }\n\n    _createClass(AnimatedNode, [{\n      key: \"__makeNative\",\n      value: function __makeNative() {\n        if (!this.__isNative) {\n          throw new Error('This node cannot be made a \"native\" animated node');\n        }\n\n        if (this.hasListeners()) {\n          this._startListeningToNativeValueUpdates();\n        }\n      }\n    }, {\n      key: \"addListener\",\n      value: function addListener(callback) {\n        var id = String(_uniqueId++);\n        this._listeners[id] = callback;\n\n        if (this.__isNative) {\n          this._startListeningToNativeValueUpdates();\n        }\n\n        return id;\n      }\n    }, {\n      key: \"removeListener\",\n      value: function removeListener(id) {\n        delete this._listeners[id];\n\n        if (this.__isNative && !this.hasListeners()) {\n          this._stopListeningForNativeValueUpdates();\n        }\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners() {\n        this._listeners = {};\n\n        if (this.__isNative) {\n          this._stopListeningForNativeValueUpdates();\n        }\n      }\n    }, {\n      key: \"hasListeners\",\n      value: function hasListeners() {\n        return !!Object.keys(this._listeners).length;\n      }\n    }, {\n      key: \"_startListeningToNativeValueUpdates\",\n      value: function _startListeningToNativeValueUpdates() {\n        var _this = this;\n\n        if (this.__nativeAnimatedValueListener && !this.__shouldUpdateListenersForNewNativeTag) {\n          return;\n        }\n\n        if (this.__shouldUpdateListenersForNewNativeTag) {\n          this.__shouldUpdateListenersForNewNativeTag = false;\n\n          this._stopListeningForNativeValueUpdates();\n        }\n\n        NativeAnimatedAPI.startListeningToAnimatedNodeValue(this.__getNativeTag());\n        this.__nativeAnimatedValueListener = NativeAnimatedHelper.nativeEventEmitter.addListener('onAnimatedValueUpdate', function (data) {\n          if (data.tag !== _this.__getNativeTag()) {\n            return;\n          }\n\n          _this._onAnimatedValueUpdateReceived(data.value);\n        });\n      }\n    }, {\n      key: \"_onAnimatedValueUpdateReceived\",\n      value: function _onAnimatedValueUpdateReceived(value) {\n        this.__callListeners(value);\n      }\n    }, {\n      key: \"__callListeners\",\n      value: function __callListeners(value) {\n        for (var _key in this._listeners) {\n          this._listeners[_key]({\n            value: value\n          });\n        }\n      }\n    }, {\n      key: \"_stopListeningForNativeValueUpdates\",\n      value: function _stopListeningForNativeValueUpdates() {\n        if (!this.__nativeAnimatedValueListener) {\n          return;\n        }\n\n        this.__nativeAnimatedValueListener.remove();\n\n        this.__nativeAnimatedValueListener = null;\n        NativeAnimatedAPI.stopListeningToAnimatedNodeValue(this.__getNativeTag());\n      }\n    }, {\n      key: \"__getNativeTag\",\n      value: function __getNativeTag() {\n        NativeAnimatedHelper.assertNativeAnimatedModule();\n        invariant(this.__isNative, 'Attempt to get native tag from node not marked as \"native\"');\n\n        if (this.__nativeTag == null) {\n          var nativeTag = NativeAnimatedHelper.generateNewNodeTag();\n          NativeAnimatedHelper.API.createAnimatedNode(nativeTag, this.__getNativeConfig());\n          this.__nativeTag = nativeTag;\n          this.__shouldUpdateListenersForNewNativeTag = true;\n        }\n\n        return this.__nativeTag;\n      }\n    }, {\n      key: \"__getNativeConfig\",\n      value: function __getNativeConfig() {\n        throw new Error('This JS animated node type cannot be used as native animated node');\n      }\n    }, {\n      key: \"toJSON\",\n      value: function toJSON() {\n        return this.__getValue();\n      }\n    }]);\n\n    return AnimatedNode;\n  }();\n\n  module.exports = AnimatedNode;\n});","map":[[2,0,10,0],[8,0,12,0],[8,6,12,6,"NativeAnimatedHelper"],[8,26,12,26],[8,29,12,29,"require"],[8,40,12,36],[8,86,12,0],[10,0,14,0],[10,6,14,6,"NativeAnimatedAPI"],[10,23,14,23],[10,26,14,26,"NativeAnimatedHelper"],[10,46,14,46],[10,47,14,47,"API"],[10,50,14,0],[12,0,15,0],[12,6,15,6,"invariant"],[12,15,15,15],[12,18,15,18,"require"],[12,29,15,25],[12,61,15,0],[14,0,19,0],[14,6,19,4,"_uniqueId"],[14,15,19,13],[14,18,19,16],[14,19,19,0],[16,6,23,6,"AnimatedNode"],[16,18],[19,33,26,19],[19,34,26,21],[22,33,27,19],[23,0,28,4],[23,12,28,8],[23,17,28,13,"__isNative"],[23,27,28,8],[23,31,28,27],[23,36,28,32,"__nativeTag"],[23,47,28,27],[23,51,28,47],[23,55,28,4],[23,57,28,53],[24,0,29,6,"NativeAnimatedHelper"],[24,10,29,6,"NativeAnimatedHelper"],[24,30,29,26],[24,31,29,27,"API"],[24,34,29,6],[24,35,29,31,"dropAnimatedNode"],[24,51,29,6],[24,52,29,48],[24,57,29,53,"__nativeTag"],[24,68,29,6],[25,0,30,6],[25,15,30,11,"__nativeTag"],[25,26,30,6],[25,29,30,25,"undefined"],[25,38,30,6],[26,0,31,5],[27,0,32,3],[30,35,33,20],[30,36,33,22],[33,43,34,28],[34,0,35,4],[34,15,35,11],[34,20,35,16,"__getValue"],[34,30,35,11],[34,32,35,4],[35,0,36,3],[38,33,37,13,"child"],[38,38],[38,40,37,34],[38,41,37,36],[41,36,38,16,"child"],[41,41],[41,43,38,37],[41,44,38,39],[44,38,39,39],[45,0,40,4],[45,15,40,11],[45,17,40,4],[46,0,41,3],[49,0,48,2],[49,28,48,16],[50,0,48,16],[52,0,49,4],[52,11,49,9,"_listeners"],[52,21,49,4],[52,24,49,22],[52,26,49,4],[53,0,50,3],[57,37,52,17],[58,0,53,4],[58,12,53,8],[58,13,53,9],[58,18,53,14,"__isNative"],[58,28,53,4],[58,30,53,26],[59,0,54,6],[59,16,54,12],[59,20,54,16,"Error"],[59,25,54,12],[59,26,54,22],[59,77,54,12],[59,78,54,6],[60,0,55,5],[62,0,57,4],[62,12,57,8],[62,17,57,13,"hasListeners"],[62,29,57,8],[62,31,57,4],[62,33,57,29],[63,0,58,6],[63,15,58,11,"_startListeningToNativeValueUpdates"],[63,50,58,6],[64,0,59,5],[65,0,60,3],[68,34,69,14,"callback"],[68,42],[68,44,69,55],[69,0,70,4],[69,12,70,10,"id"],[69,14,70,12],[69,17,70,15,"String"],[69,23,70,21],[69,24,70,22,"_uniqueId"],[69,33,70,31],[69,35,70,21],[69,36,70,4],[70,0,71,4],[70,13,71,9,"_listeners"],[70,23,71,4],[70,24,71,20,"id"],[70,26,71,4],[70,30,71,26,"callback"],[70,38,71,4],[72,0,72,4],[72,12,72,8],[72,17,72,13,"__isNative"],[72,27,72,4],[72,29,72,25],[73,0,73,6],[73,15,73,11,"_startListeningToNativeValueUpdates"],[73,50,73,6],[74,0,74,5],[76,0,75,4],[76,15,75,11,"id"],[76,17,75,4],[77,0,76,3],[80,37,84,17,"id"],[80,39],[80,41,84,35],[81,0,85,4],[81,15,85,11],[81,20,85,16,"_listeners"],[81,30,85,11],[81,31,85,27,"id"],[81,33,85,11],[81,34,85,4],[83,0,86,4],[83,12,86,8],[83,17,86,13,"__isNative"],[83,27,86,8],[83,31,86,27],[83,32,86,28],[83,37,86,33,"hasListeners"],[83,49,86,28],[83,51,86,4],[83,53,86,49],[84,0,87,6],[84,15,87,11,"_stopListeningForNativeValueUpdates"],[84,50,87,6],[85,0,88,5],[86,0,89,3],[89,43,96,29],[90,0,97,4],[90,13,97,9,"_listeners"],[90,23,97,4],[90,26,97,22],[90,28,97,4],[92,0,98,4],[92,12,98,8],[92,17,98,13,"__isNative"],[92,27,98,4],[92,29,98,25],[93,0,99,6],[93,15,99,11,"_stopListeningForNativeValueUpdates"],[93,50,99,6],[94,0,100,5],[95,0,101,3],[98,37,103,26],[99,0,104,4],[99,15,104,11],[99,16,104,12],[99,17,104,13,"Object"],[99,23,104,19],[99,24,104,20,"keys"],[99,28,104,13],[99,29,104,25],[99,34,104,30,"_listeners"],[99,44,104,13],[99,46,104,42,"length"],[99,52,104,4],[100,0,105,3],[103,60,107,40],[104,0,107,40],[106,0,108,4],[106,12,109,6],[106,17,109,11,"__nativeAnimatedValueListener"],[106,46,109,6],[106,50,110,6],[106,51,110,7],[106,56,110,12,"__shouldUpdateListenersForNewNativeTag"],[106,94,108,4],[106,96,111,6],[107,0,112,6],[108,0,113,5],[110,0,115,4],[110,12,115,8],[110,17,115,13,"__shouldUpdateListenersForNewNativeTag"],[110,55,115,4],[110,57,115,53],[111,0,116,6],[111,15,116,11,"__shouldUpdateListenersForNewNativeTag"],[111,53,116,6],[111,56,116,52],[111,61,116,6],[113,0,117,6],[113,15,117,11,"_stopListeningForNativeValueUpdates"],[113,50,117,6],[114,0,118,5],[116,0,120,4,"NativeAnimatedAPI"],[116,8,120,4,"NativeAnimatedAPI"],[116,25,120,21],[116,26,120,22,"startListeningToAnimatedNodeValue"],[116,59,120,4],[116,60,120,56],[116,65,120,61,"__getNativeTag"],[116,79,120,56],[116,81,120,4],[117,0,121,4],[117,13,121,9,"__nativeAnimatedValueListener"],[117,42,121,4],[117,45,121,41,"NativeAnimatedHelper"],[117,65,121,61],[117,66,121,62,"nativeEventEmitter"],[117,84,121,41],[117,85,121,81,"addListener"],[117,96,121,41],[117,97,122,6],[117,120,121,41],[117,122,123,6],[117,132,123,6,"data"],[117,136,123,10],[117,138,123,14],[118,0,124,8],[118,14,124,12,"data"],[118,18,124,16],[118,19,124,17,"tag"],[118,22,124,12],[118,27,124,25],[118,32,124,29],[118,33,124,30,"__getNativeTag"],[118,47,124,25],[118,49,124,8],[118,51,124,48],[119,0,125,10],[120,0,126,9],[122,0,127,8],[122,10,127,8],[122,15,127,12],[122,16,127,13,"_onAnimatedValueUpdateReceived"],[122,46,127,8],[122,47,127,44,"data"],[122,51,127,48],[122,52,127,49,"value"],[122,57,127,8],[123,0,128,7],[123,9,121,41],[123,10,121,4],[124,0,130,3],[127,53,132,33,"value"],[127,58],[127,60,132,48],[128,0,133,4],[128,13,133,9,"__callListeners"],[128,28,133,4],[128,29,133,25,"value"],[128,34,133,4],[129,0,134,3],[132,38,136,18,"value"],[132,43],[132,45,136,39],[133,0,137,4],[133,13,137,9],[133,17,137,15,"key"],[133,21,137,4],[133,25,137,22],[133,30,137,27,"_listeners"],[133,40,137,4],[133,42,137,39],[134,0,138,6],[134,15,138,11,"_listeners"],[134,25,138,6],[134,26,138,22,"key"],[134,30,138,6],[134,32,138,27],[135,0,138,28,"value"],[135,12,138,28,"value"],[135,17,138,33],[135,19,138,28,"value"],[136,0,138,27],[136,11,138,6],[137,0,139,5],[138,0,140,3],[141,60,142,40],[142,0,143,4],[142,12,143,8],[142,13,143,9],[142,18,143,14,"__nativeAnimatedValueListener"],[142,47,143,4],[142,49,143,45],[143,0,144,6],[144,0,145,5],[146,0,147,4],[146,13,147,9,"__nativeAnimatedValueListener"],[146,42,147,4],[146,43,147,39,"remove"],[146,49,147,4],[148,0,148,4],[148,13,148,9,"__nativeAnimatedValueListener"],[148,42,148,4],[148,45,148,41],[148,49,148,4],[149,0,149,4,"NativeAnimatedAPI"],[149,8,149,4,"NativeAnimatedAPI"],[149,25,149,21],[149,26,149,22,"stopListeningToAnimatedNodeValue"],[149,58,149,4],[149,59,149,55],[149,64,149,60,"__getNativeTag"],[149,78,149,55],[149,80,149,4],[150,0,150,3],[153,39,152,28],[154,0,153,4,"NativeAnimatedHelper"],[154,8,153,4,"NativeAnimatedHelper"],[154,28,153,24],[154,29,153,25,"assertNativeAnimatedModule"],[154,55,153,4],[155,0,154,4,"invariant"],[155,8,154,4,"invariant"],[155,17,154,13],[155,18,155,6],[155,23,155,11,"__isNative"],[155,33,154,13],[155,35,156,6],[155,95,154,13],[155,96,154,4],[157,0,158,4],[157,12,158,8],[157,17,158,13,"__nativeTag"],[157,28,158,8],[157,32,158,28],[157,36,158,4],[157,38,158,34],[158,0,159,6],[158,14,159,12,"nativeTag"],[158,23,159,30],[158,26,159,33,"NativeAnimatedHelper"],[158,46,159,53],[158,47,159,54,"generateNewNodeTag"],[158,65,159,33],[158,67,159,6],[159,0,160,6,"NativeAnimatedHelper"],[159,10,160,6,"NativeAnimatedHelper"],[159,30,160,26],[159,31,160,27,"API"],[159,34,160,6],[159,35,160,31,"createAnimatedNode"],[159,53,160,6],[159,54,161,8,"nativeTag"],[159,63,160,6],[159,65,162,8],[159,70,162,13,"__getNativeConfig"],[159,87,162,8],[159,89,160,6],[160,0,164,6],[160,15,164,11,"__nativeTag"],[160,26,164,6],[160,29,164,25,"nativeTag"],[160,38,164,6],[161,0,165,6],[161,15,165,11,"__shouldUpdateListenersForNewNativeTag"],[161,53,165,6],[161,56,165,52],[161,60,165,6],[162,0,166,5],[164,0,167,4],[164,15,167,11],[164,20,167,16,"__nativeTag"],[164,31,167,4],[165,0,168,3],[168,42,169,30],[169,0,170,4],[169,14,170,10],[169,18,170,14,"Error"],[169,23,170,10],[169,24,171,6],[169,91,170,10],[169,92,170,4],[170,0,173,3],[173,31,174,16],[174,0,175,4],[174,15,175,11],[174,20,175,16,"__getValue"],[174,30,175,11],[174,32,175,4],[175,0,176,3],[181,0,179,0,"module"],[181,2,179,0,"module"],[181,8,179,6],[181,9,179,7,"exports"],[181,16,179,0],[181,19,179,17,"AnimatedNode"],[181,31,179,0]]},"type":"js/module"}]}